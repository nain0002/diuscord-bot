<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Dashboard</title>
    <link rel="stylesheet" href="/css/admin.css">
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-small">
                    <svg width="40" height="40" viewBox="0 0 60 60">
                        <rect width="60" height="60" rx="12" fill="url(#gradient)"/>
                        <path d="M30 15L45 25V40L30 50L15 40V25L30 15Z" fill="white" opacity="0.9"/>
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="60" y2="60">
                                <stop offset="0%" stop-color="#667eea"/>
                                <stop offset="100%" stop-color="#764ba2"/>
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <h2>Admin Panel</h2>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <span class="icon">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-page="players">
                    <span class="icon">üë•</span>
                    <span>Players</span>
                </a>
                <a href="#" class="nav-item" data-page="database">
                    <span class="icon">üíæ</span>
                    <span>Database</span>
                </a>
                <a href="#" class="nav-item" data-page="server">
                    <span class="icon">‚öôÔ∏è</span>
                    <span>Server</span>
                </a>
                <a href="#" class="nav-item" data-page="logs">
                    <span class="icon">üìù</span>
                    <span>Logs</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <span class="user-name" id="adminUsername">Admin</span>
                    <button class="btn btn-sm btn-secondary" onclick="logout()">Logout</button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="topbar">
                <h1 id="pageTitle">Dashboard</h1>
                <div class="topbar-actions">
                    <span class="status-indicator online">‚óè</span>
                    <span>Server Online</span>
                </div>
            </div>

            <!-- Dashboard Page -->
            <div id="page-dashboard" class="page active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-info">
                            <h3 id="stat-users">0</h3>
                            <p>Total Users</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üé≠</div>
                        <div class="stat-info">
                            <h3 id="stat-characters">0</h3>
                            <p>Characters</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üöó</div>
                        <div class="stat-info">
                            <h3 id="stat-vehicles">0</h3>
                            <p>Vehicles</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <h3 id="stat-transactions">0</h3>
                            <p>Today's Transactions</p>
                        </div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Server Status</h3>
                        <div class="server-metrics">
                            <div class="metric">
                                <label>Uptime:</label>
                                <span id="server-uptime">0h 0m</span>
                            </div>
                            <div class="metric">
                                <label>Memory:</label>
                                <span id="server-memory">0 MB / 0 MB</span>
                            </div>
                            <div class="metric">
                                <label>CPU:</label>
                                <span id="server-cpu">0%</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Recent Activity</h3>
                        <div id="recent-activity" class="activity-list">
                            <p class="text-muted">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Players Page -->
            <div id="page-players" class="page">
                <div class="card">
                    <div class="card-header">
                        <h3>Player Management</h3>
                        <div class="card-actions">
                            <input type="text" id="player-search" placeholder="Search players..." class="search-input">
                            <button class="btn btn-primary" onclick="loadPlayers()">Refresh</button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="players-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Username</th>
                                    <th>Email</th>
                                    <th>Characters</th>
                                    <th>Last Login</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="players-tbody">
                                <tr><td colspan="7" class="text-center">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pagination" id="players-pagination"></div>
                </div>
            </div>

            <!-- Database Page -->
            <div id="page-database" class="page">
                <div class="grid-2">
                    <div class="card">
                        <h3>Database Tables</h3>
                        <div id="tables-list" class="list-group">
                            <p class="text-muted">Loading...</p>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Database Statistics</h3>
                        <div id="database-stats">
                            <p class="text-muted">Loading...</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Table Data: <span id="current-table">-</span></h3>
                    <div class="table-container">
                        <div id="table-data"></div>
                    </div>
                </div>
            </div>

            <!-- Server Page -->
            <div id="page-server" class="page">
                <div class="card">
                    <h3>Server Configuration</h3>
                    <div id="server-config">
                        <p class="text-muted">Loading...</p>
                    </div>
                </div>

                <div class="card">
                    <h3>Resources</h3>
                    <div id="resources-list">
                        <p class="text-muted">Loading...</p>
                    </div>
                </div>
            </div>

            <!-- Logs Page -->
            <div id="page-logs" class="page">
                <div class="card">
                    <div class="card-header">
                        <h3>Server Logs</h3>
                        <div class="card-actions">
                            <button class="btn btn-secondary" onclick="loadLogs()">Refresh</button>
                            <button class="btn btn-danger" onclick="clearLogs()">Clear</button>
                        </div>
                    </div>
                    <div class="logs-container" id="logs-content">
                        <p class="text-muted">Loading...</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/js/dashboard.js"></script>
</body>
</html>
